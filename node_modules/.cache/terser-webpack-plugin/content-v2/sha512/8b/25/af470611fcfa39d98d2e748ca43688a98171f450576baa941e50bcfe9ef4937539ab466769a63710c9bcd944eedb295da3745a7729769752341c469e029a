{"code":"!function(t){var e={};function i(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var s in t)i.d(o,s,function(e){return t[e]}.bind(null,s));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=13)}([function(t,e){t.exports='<svg version=\"1.1\" id=\"pawn\" class=\"svg-piece\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\"><title>Pawn</title><path d=\"M144.2,173c0,1,0-0.1-0.1,3.5c-24.2,8.2-63,8.5-88.1,0c-1.2-13.1,4.1-30.6,13.2-41.5l0,0c13-12.1,21.8-31.2,16.4-50.8C56.9,81.3,60.9,74,84.1,71.6c-27.7-16.4-14-54.5,15.9-54.4c31.9,0.6,42.4,39,15.9,54.4c25.4,2.7,24.8,10.1-1.6,12.6c-4.9,17.1,1.7,37.5,16.4,50.8l0,0C139.4,145.8,144.1,159.2,144.2,173z\"></path></svg>'},function(t,e){t.exports='<svg version=\"1.1\" id=\"pawn\" class=\"svg-piece\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\"><title>Pawn</title><path d=\"M144.2,173c0,1,0-0.1-0.1,3.5c-24.2,8.2-63,8.5-88.1,0c-1.2-13.1,4.1-30.6,13.2-41.5l0,0c13-12.1,21.8-31.2,16.4-50.8C56.9,81.3,60.9,74,84.1,71.6c-27.7-16.4-14-54.5,15.9-54.4c31.9,0.6,42.4,39,15.9,54.4c25.4,2.7,24.8,10.1-1.6,12.6c-4.9,17.1,1.7,37.5,16.4,50.8l0,0C139.4,145.8,144.1,159.2,144.2,173z\"></path></svg>'},function(t,e){t.exports='<svg version=\"1.1\" id=\"rook\" class=\"svg-piece\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\"><title>rook</title><path id=\"ладья\" d=\"M166.3,27.3c-4.7,36.9-10.2,80.7-14.9,117.6c-10.4,1.8-7.3,16.3-7.1,28.9c-24.2,8.2-63,8.5-88.1,0 c1-13.6,0.6-29.7-7.6-28.9C43.9,108,38.3,64,33.7,27.3c6.9-1.7,14.4-3.2,22.4-4.4l5.4,30.1c7-0.9,14.3-1.5,21.8-1.9l-1.8-30.7 c12.5-0.7,25-0.7,37.5,0l-1.8,30.7c7.5,0.4,14.8,1.1,21.8,1.9l5.4-30.1C152.1,24.2,159.5,25.6,166.3,27.3z\"></path></svg>'},function(t,e){t.exports='<svg version=\"1.1\" id=\"rook\" class=\"svg-piece\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\"><title>rook</title><path id=\"ладья\" d=\"M166.3,27.3c-4.7,36.9-10.2,80.7-14.9,117.6c-10.4,1.8-7.3,16.3-7.1,28.9c-24.2,8.2-63,8.5-88.1,0 c1-13.6,0.6-29.7-7.6-28.9C43.9,108,38.3,64,33.7,27.3c6.9-1.7,14.4-3.2,22.4-4.4l5.4,30.1c7-0.9,14.3-1.5,21.8-1.9l-1.8-30.7 c12.5-0.7,25-0.7,37.5,0l-1.8,30.7c7.5,0.4,14.8,1.1,21.8,1.9l5.4-30.1C152.1,24.2,159.5,25.6,166.3,27.3z\"></path></svg>'},function(t,e){t.exports='<svg version=\"1.1\" id=\"bishop\" class=\"svg-piece\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0\" y=\"0\" viewBox=\"0 0 200 200\"><title>Bishop</title><path d=\"M167.1,120.5c-1.2,31.4-21.8,33.4-23.3,43.9l0,0c0.5,3.7,0.6,7.5,0.4,11.3c-24.7,8.4-63.1,8.5-88.1,0c-0.2-3.6-0.1-7.1,0.3-10.7l0,0c0-1.6-2.2-6.3-5-8.3c-29.9-23.8-19.6-55.5,2-78.4c0,0,20.9,20.1,27.8,27.8c1.8,2,9,7.7,5.7-3.7c-3.9-13.6-14.3-42.3-14.3-42.3C83.7,50.5,96,40.3,94.9,35.5l0,0c-7.6-4.7-4.5-16.5,3.9-17.4c9.8-1.3,14.1,12,6.3,17.2l0,0c-0.1,0.2-1.4,2.6,6.2,10.2C131.3,64.5,167.8,89.6,167.1,120.5z\"></path></svg>'},function(t,e){t.exports='<svg version=\"1.1\" id=\"bishop\" class=\"svg-piece\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0\" y=\"0\" viewBox=\"0 0 200 200\"><title>Bishop</title><path d=\"M167.1,120.5c-1.2,31.4-21.8,33.4-23.3,43.9l0,0c0.5,3.7,0.6,7.5,0.4,11.3c-24.7,8.4-63.1,8.5-88.1,0c-0.2-3.6-0.1-7.1,0.3-10.7l0,0c0-1.6-2.2-6.3-5-8.3c-29.9-23.8-19.6-55.5,2-78.4c0,0,20.9,20.1,27.8,27.8c1.8,2,9,7.7,5.7-3.7c-3.9-13.6-14.3-42.3-14.3-42.3C83.7,50.5,96,40.3,94.9,35.5l0,0c-7.6-4.7-4.5-16.5,3.9-17.4c9.8-1.3,14.1,12,6.3,17.2l0,0c-0.1,0.2-1.4,2.6,6.2,10.2C131.3,64.5,167.8,89.6,167.1,120.5z\"></path></svg>'},function(t,e){t.exports='<svg version=\"1.1\" id=\"queen\" class=\"svg-piece\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\"><title>Queen</title><path id=\"queen\" d=\"M182.1,47.1c-0.1,4.5-3.8,8.1-8.3,8c-0.5,0-1-0.1-1.5-0.2c-5.9,25.9-15.4,67.2-21.2,92.6c0,0-8.1,0-8.1,14 c0,0.1,0,0.3,0.1,0.4c0.9,4.8,1.2,9.6,0.9,14.5c-24.7,8.4-63.1,8.5-88.1,0c-0.2-3.6-0.1-7.2,0.3-10.7c0-0.1,0-0.2,0-0.3 c0.2-1.2,0.3-2.4,0.2-3.7c0.1-14.3-8.1-14.2-8.1-14.2L27.5,54.9C18,56.9,14,43.5,22.6,39.7c9.7-4,15.3,9.7,7.1,14.4 c10.5,18.5,24.5,43.3,35,61.8c-0.4-17.2-1.3-59.7-1.7-77.2c-9.6-0.1-10.9-13.3-2.3-15.8c10.5-2.7,13.9,12.4,4.6,15.4 c5,15.9,17.7,55.8,22.6,71c2.3-16.3,8.6-59.5,11-76.2c-10.1-1.9-8.3-15.8,1.1-16c10.1,0.3,10.6,14.4,1.2,16c2.4,16.8,8.7,60,11,76.2 c4.9-15.4,17.6-55.3,22.5-71c-9.3-3.3-6.1-16.7,3.5-15.6c10.4,1.7,8.2,16.1-1.3,16c-0.3,13.5-1.7,77.2-1.7,77.2 c7-12.3,35-61.8,35-61.8C156.5,43,180.2,30.8,182.1,47.1z\"></path></svg>'},function(t,e){t.exports='<svg version=\"1.1\" id=\"queen\" class=\"svg-piece\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\"><title>Queen</title><path id=\"queen\" d=\"M182.1,47.1c-0.1,4.5-3.8,8.1-8.3,8c-0.5,0-1-0.1-1.5-0.2c-5.9,25.9-15.4,67.2-21.2,92.6c0,0-8.1,0-8.1,14 c0,0.1,0,0.3,0.1,0.4c0.9,4.8,1.2,9.6,0.9,14.5c-24.7,8.4-63.1,8.5-88.1,0c-0.2-3.6-0.1-7.2,0.3-10.7c0-0.1,0-0.2,0-0.3 c0.2-1.2,0.3-2.4,0.2-3.7c0.1-14.3-8.1-14.2-8.1-14.2L27.5,54.9C18,56.9,14,43.5,22.6,39.7c9.7-4,15.3,9.7,7.1,14.4 c10.5,18.5,24.5,43.3,35,61.8c-0.4-17.2-1.3-59.7-1.7-77.2c-9.6-0.1-10.9-13.3-2.3-15.8c10.5-2.7,13.9,12.4,4.6,15.4 c5,15.9,17.7,55.8,22.6,71c2.3-16.3,8.6-59.5,11-76.2c-10.1-1.9-8.3-15.8,1.1-16c10.1,0.3,10.6,14.4,1.2,16c2.4,16.8,8.7,60,11,76.2 c4.9-15.4,17.6-55.3,22.5-71c-9.3-3.3-6.1-16.7,3.5-15.6c10.4,1.7,8.2,16.1-1.3,16c-0.3,13.5-1.7,77.2-1.7,77.2 c7-12.3,35-61.8,35-61.8C156.5,43,180.2,30.8,182.1,47.1z\"></path></svg>'},function(t,e){t.exports='<svg version=\"1.1\" id=\"king\" class=\"svg-piece\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\"><title>King</title><path d=\"M156.8,120.9c-5.8,35.3-17.2,22.6-12.6,55.5c-24.4,8.3-63.1,8.5-88.1,0c1.2-13.8,1.1-25.1-7.8-36 c-16.3-31.3,8.5-56.2,40.7-61c-2.3-4.7-0.6-13.4,4.8-16.6c-1.4-4.1-2.3-8.3-2.6-12.6c-20,4.4-18.6-20.2,0.2-15.4 c3.2-24.3,14.4-22.4,17.3,0c19.4-4.5,18.5,19.9,0.2,15.4c-0.3,4.4-1.2,8.7-2.7,12.8c5,3.8,6.9,10.6,4.5,16.4 C136.6,83.4,156.3,99.2,156.8,120.9z\"></path></svg>'},function(t,e){t.exports='<svg version=\"1.1\" id=\"king\" class=\"svg-piece\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\"><title>King</title><path d=\"M156.8,120.9c-5.8,35.3-17.2,22.6-12.6,55.5c-24.4,8.3-63.1,8.5-88.1,0c1.2-13.8,1.1-25.1-7.8-36 c-16.3-31.3,8.5-56.2,40.7-61c-2.3-4.7-0.6-13.4,4.8-16.6c-1.4-4.1-2.3-8.3-2.6-12.6c-20,4.4-18.6-20.2,0.2-15.4 c3.2-24.3,14.4-22.4,17.3,0c19.4-4.5,18.5,19.9,0.2,15.4c-0.3,4.4-1.2,8.7-2.7,12.8c5,3.8,6.9,10.6,4.5,16.4 C136.6,83.4,156.3,99.2,156.8,120.9z\"></path></svg>'},function(t,e){t.exports='<svg version=\"1.1\" id=\"knight\" class=\"svg-piece\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\"><title>Knight</title><path id=\"path\" d=\"M161.5,112c-13.9,35-8.7,35-7.4,62.7c-24.2,8.2-63,8.6-88.1,0c-1.1-14.1,4.3-30.7,13.3-41.5l0,0c11.2-10.8,19.6-25.6,17.8-43.6c-0.7,10.2-29.2,16.8-32.7,35.3l-10.8,0.3c0.1-1.3,0.4-4.4,0.6-6.6c-9.9,15.2-19-8-21.5-17.9C47.7,89.8,61,52.4,64.3,43.1l11.3-6.3l-9.7-10.5C124.7-0.7,187.1,51.5,161.5,112z\"></path></svg>'},function(t,e){t.exports='<svg version=\"1.1\" id=\"knight\" class=\"svg-piece\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\"><title>Knight</title><path id=\"path\" d=\"M161.5,112c-13.9,35-8.7,35-7.4,62.7c-24.2,8.2-63,8.6-88.1,0c-1.1-14.1,4.3-30.7,13.3-41.5l0,0c11.2-10.8,19.6-25.6,17.8-43.6c-0.7,10.2-29.2,16.8-32.7,35.3l-10.8,0.3c0.1-1.3,0.4-4.4,0.6-6.6c-9.9,15.2-19-8-21.5-17.9C47.7,89.8,61,52.4,64.3,43.1l11.3-6.3l-9.7-10.5C124.7-0.7,187.1,51.5,161.5,112z\"></path></svg>'},function(t,e,i){},function(t,e,i){\"use strict\";i.r(e);i(12);class o{static x(t){return t%8}static y(t){return Math.floor(t/8)}static oneDim(t,e){return 8*e+t}static oneDimFrom(t,e){return this.oneDim(this.x(t),this.y(e))}static xSubtract(t,e){return this.x(t)-this.x(e)}static ySubtract(t,e){return this.y(t)-this.y(e)}}class s{constructor(t,e){this._firstStep=null,this._type=void 0,this._color=t,this._position=e}hasObstructionByWay(t,e){let i=!0,s=o.xSubtract(t,this.position)>0?1:-1;0===o.xSubtract(t,this.position)&&(s=0);let n=o.ySubtract(t,this.position)>0?1:-1;0===o.ySubtract(t,this.position)&&(n=0);let c=0!==s?o.xSubtract(t,this.position)*s:o.ySubtract(t,this.position)*n;for(let t=1;t<c;t++)if(e.has(o.oneDim(o.x(this.position)+t*s,o.y(this.position)+t*n))){i=!1;break}return!i}canMove(t,e){let i=!1;return e.friendly(this.color).has(t)||this.position===t||(i=!0),i}doMove(t,e,i){e.movePiece(this.position,t,i)}get firstStep(){return this._firstStep}set firstStep(t){null===this._firstStep&&(this._firstStep=t)}get type(){return this._type}set type(t){let e=[\"pawn\",\"knight\",\"rook\",\"bishop\",\"queen\",\"king\"],i=!1;for(let o of e)o===t&&(i=!0);i&&(this._type=t)}get color(){return this._color}get position(){return this._position}set position(t){return this._position=t,!0}moveAbility(t,e,i){let o=new Set;for(let s=0;s<gridSize**2;s++)!t.friendly(this.color).has(s)&&this.canMove(s,t,i)&&t.willKingProtected(this.position,s,t,i)&&o.add(e.get(s));return o}}class n extends s{constructor(t,e){super(t,e),this._type=\"bishop\"}canMove(t,e){let i=super.canMove(t,e);return Math.abs(o.xSubtract(t,this.position))!==Math.abs(o.ySubtract(t,this.position))&&(i=!1),i=!this.hasObstructionByWay(t,e)&&i,i}}class c extends s{constructor(t,e){super(t,e),this._type=\"king\"}canMove(t,e,i){let s=super.canMove(t,e);if(2===Math.abs(o.xSubtract(t,this.position))&&0===Math.abs(o.ySubtract(t,this.position))&&null===this.firstStep){let n=o.xSubtract(t,this.position)>0?1:-1;e.isCellProtected(this.position,this.color,i)&&e.isCellProtected(this.position+n,this.color,i)&&e.isCellProtected(this.position+2*n,this.color,i)||(s=!1);let c=1===n?o.oneDim(7,o.y(this.position)):o.oneDim(0,this.position);e.friendly(this.color).get(c)&&null===e.friendly(this.color).get(c).firstStep&&!this.hasObstructionByWay(c,e)&&null===this.firstStep||(s=!1)}else Math.abs(o.xSubtract(t,this.position))>1||Math.abs(o.ySubtract(t,this.position))>1?s=!1:super.canMove(t,e);return s}doMove(t,e,i){if(2===Math.abs(o.xSubtract(t,this.position))){let s=o.xSubtract(t,this.position)/2,n=1===s?o.oneDim(7,o.y(this.position)):o.oneDim(0,o.y(this.position));e.movePiece(n,this.position+s,i),e.movePiece(this.position,t,i)}else super.doMove(t,e,i)}}class r extends s{constructor(t,e){super(t,e),this._type=\"knight\"}canMove(t,e){let i=super.canMove(t,e),s=!1;return(1===Math.abs(o.xSubtract(t,this.position))&&2===Math.abs(o.ySubtract(t,this.position))||2===Math.abs(o.xSubtract(t,this.position))&&1===Math.abs(o.ySubtract(t,this.position)))&&(s=!0),i&&s}}class l extends s{constructor(t,e){super(t,e),this._type=\"pawn\",this._pieceDirection=\"white\"===t?1:-1}canMove(t,e,i){if(!1===super.canMove(t,e))return!1;let s=!1;if(0===o.xSubtract(t,this.position))(o.ySubtract(t,this.position)*this.pieceDirection==2&&null===this.firstStep||o.ySubtract(t,this.position)*this.pieceDirection==1)&&(this.hasObstructionByWay(t+this._pieceDirection*gridSize,e)||(s=!0));else if(1===Math.abs(o.xSubtract(t,this.position))&&o.ySubtract(t,this.position)*this.pieceDirection==1)if(e.enemy(this.color).has(t))s=!0;else if(e.enemy(this.color).has(o.oneDimFrom(t,this.position))){e.enemy(this.color).get(o.oneDimFrom(t,this.position)).firstStep===i-1&&(s=!0)}return s}doMove(t,e,i){if(1!==Math.abs(o.xSubtract(t,this.position))||e.enemy(this.color).has(t))return super.doMove(t,e,i);e.delete(o.oneDimFrom(t,this.position)),e.movePiece(this.position,t,i),\"white\"===this.color&&o.y(t)===gridSize||\"black\"===this.color&&o.y(t)}get pieceDirection(){return this._pieceDirection}}class p extends s{constructor(t,e){super(t,e),this._type=\"queen\"}canMove(t,e){let i=super.canMove(t,e);return Math.abs(o.xSubtract(t,this.position))!==Math.abs(o.ySubtract(t,this.position))&&0!==o.xSubtract(t,this.position)&&0!==o.ySubtract(t,this.position)&&(i=!1),i=!this.hasObstructionByWay(t,e)&&i,i}}class a extends s{constructor(t,e){super(t,e),this._type=\"rook\"}canMove(t,e){let i=super.canMove(t,e);return 0!==o.xSubtract(t,this.position)&&0!==o.ySubtract(t,this.position)&&(i=!1),i=!this.hasObstructionByWay(t,e)&&i,i}}function h({type:t,position:e,color:i}){let o;switch(t){case\"pawn\":o=new l(i,e);break;case\"knight\":o=new r(i,e);break;case\"bishop\":o=new n(i,e);break;case\"rook\":o=new a(i,e);break;case\"queen\":o=new p(i,e);break;case\"king\":o=new c(i,e)}return o}class u extends Map{constructor(){super(),this._starterPack=[{type:\"pawn\",position:8,color:\"white\"},{type:\"pawn\",position:9,color:\"white\"},{type:\"pawn\",position:10,color:\"white\"},{type:\"pawn\",position:11,color:\"white\"},{type:\"pawn\",position:12,color:\"white\"},{type:\"pawn\",position:13,color:\"white\"},{type:\"pawn\",position:14,color:\"white\"},{type:\"pawn\",position:15,color:\"white\"},{type:\"rook\",position:0,color:\"white\"},{type:\"rook\",position:7,color:\"white\"},{type:\"knight\",position:1,color:\"white\"},{type:\"knight\",position:6,color:\"white\"},{type:\"bishop\",position:2,color:\"white\"},{type:\"bishop\",position:5,color:\"white\"},{type:\"queen\",position:3,color:\"white\"},{type:\"king\",position:4,color:\"white\"},{type:\"pawn\",position:48,color:\"black\"},{type:\"pawn\",position:49,color:\"black\"},{type:\"pawn\",position:50,color:\"black\"},{type:\"pawn\",position:51,color:\"black\"},{type:\"pawn\",position:52,color:\"black\"},{type:\"pawn\",position:53,color:\"black\"},{type:\"pawn\",position:54,color:\"black\"},{type:\"pawn\",position:55,color:\"black\"},{type:\"rook\",position:56,color:\"black\"},{type:\"rook\",position:63,color:\"black\"},{type:\"knight\",position:57,color:\"black\"},{type:\"knight\",position:62,color:\"black\"},{type:\"bishop\",position:58,color:\"black\"},{type:\"bishop\",position:61,color:\"black\"},{type:\"queen\",position:59,color:\"black\"},{type:\"king\",position:60,color:\"black\"}]}fill(){for(let t=0;t<this._starterPack.length;t++)this.set(this._starterPack[t].position,h(this._starterPack[t]))}fillNewMap(t){for(let e of t)this.set(e[0],h({type:e[1].type,position:e[1].position,color:e[1].color})),this.get(e[0]).firstStep=e[1].firstStep}get white(){return this._fromColor(\"white\")}get black(){return this._fromColor(\"black\")}friendly(t){return\"white\"===t?this.white:\"black\"===t?this.black:void 0}enemy(t){return\"white\"===t?this.black:\"black\"===t?this.white:void 0}findKingPosition(t){for(let e of this)if(\"king\"===e[1].type&&e[1].color===t)return e[0]}willKingProtected(t,e,i,o){let s=this.get(t);for(let n of this.enemy(s.color).keys()){let c=new u;c.fillNewMap(i),c.movePiece(t,e,o);let r=c.get(n);if(r.canMove(c.findKingPosition(s.color),c,o))return!1;c.set(r.position,r)}return!0}isCellProtected(t,e,i){for(let o of this.enemy(e))if(o[1].canMove(t,this,i))return!1;return!0}movePiece(t,e,i){let o=this.get(t);this.delete(e),this.delete(t),this.set(e,o),o.position=e,o.firstStep=i}transformPawn(t,e,i){}_fromColor(t){let e=new Map;for(let i of this)i[1].color===t&&e.set(i[0],i[1]);return e}}var g=i(0),v=i.n(g),d=i(1),w=i.n(d),y=i(2),f=i.n(y),b=i(3),x=i.n(b),m=i(4),k=i.n(m),M=i(5),S=i.n(M),_=i(6),C=i.n(_),P=i(7),D=i.n(P),z=i(8),B=i.n(z),L=i(9),T=i.n(L),H=i(10),O=i.n(H),E=i(11),N=i.n(E);class q extends Map{constructor(t){super(),this._hvalues=[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\"],this._size=8,this._parent=document.createElement(\"div\"),this._parent.id=\"deck\",t.append(this._parent),this.generateGrid(),this.fill()}getCellPosition(t){for(let e of this)if(e[1]===t)return e[0];return!1}fill(){let t=this._parent.childNodes;for(let e=0;e<this._size;e++){let i=t[e+1].childNodes;for(let t=0;t<this._size;t++)this.set(o.oneDim(e,this._size-t-1),i[t+1])}}generateGrid(){this.generateNumberColumn();for(let t=0;t<this._size;t++)this.generateColumn(t);this.generateNumberColumn()}generateNumberColumn(){let t=this.generateDiv(\"column\");t.append(this.generateDiv(\"label\"));for(let e=0;e<this._size;e++)t.append(this.generateDiv(\"label\",this._size-e));t.append(this.generateDiv(\"label\")),this._parent.append(t)}generateColumn(t){let e=this.generateDiv(\"column\");e.append(this.generateDiv(\"label\",this._hvalues[t]));for(let t=0;t<this._size;t++)e.append(this.generateDiv(\"cell\"));e.append(this.generateDiv(\"label\",this._hvalues[t])),this._parent.append(e)}generateDiv(t,e){let i=document.createElement(\"div\");return i.className=t,e&&(i.innerText=e),i}draw(t){for(let e of this){e[1].innerHTML=\"\";let i,o=e[0];if(t.has(o)){i=t.get(o).type;let e=t.get(o).color;switch(i){case\"pawn\":this.get(o).innerHTML=this.get(o).innerHTML=\"white\"===e?w.a:v.a;break;case\"knight\":this.get(o).innerHTML=this.get(o).innerHTML=\"white\"===e?N.a:O.a;break;case\"bishop\":this.get(o).innerHTML=this.get(o).innerHTML=\"white\"===e?S.a:k.a;break;case\"rook\":this.get(o).innerHTML=this.get(o).innerHTML=\"white\"===e?x.a:f.a;break;case\"queen\":this.get(o).innerHTML=this.get(o).innerHTML=\"white\"===e?D.a:C.a;break;case\"king\":this.get(o).innerHTML=this.get(o).innerHTML=\"white\"===e?T.a:B.a}}}}}let K=document.getElementById(\"deck-surface\"),j=new u;j.fill();let W=new q(K,8);W.draw(j),K.addEventListener(\"mouseover\",(function(t){let e=t.target.closest(\".cell\");if(!e||\"cell\"!==e.className)return;let i=deck.getCellPosition(e);if(map.has(i)){let t=map.get(i).moveAbility(map,deck,step);for(let e of t)e.style.background=\"cyan\"}e.onmouseout=function(){!function(){let t=document.getElementsByClassName(\"cell\");for(let e=0;e<t.length;e++)t[e].style.background=\"\"}()}})),K.addEventListener(\"mousedown\",()=>{!function(t,e,i,o){let s=t.target.closest(\".cell\");if(!s||\"cell\"!==s.className||!i.has(e.getCellPosition(s)))return;let n=s.cloneNode(!0);function c(t,e){n.style.left=t-n.offsetWidth/2+\"px\",n.style.top=e-n.offsetHeight/2+\"px\"}function r(t){c(t.pageX,t.pageY)}n.id=\"movable_cell\",n.ondragstart=function(){return!1},document.body.append(n),c(t.pageX,t.pageY),document.addEventListener(\"mousemove\",r),document.addEventListener(\"mouseup\",(function t(n){document.removeEventListener(\"mousemove\",r),s.onmouseup=null,parent.addEventListener(\"mouseover\",add);let c=e.getCellPosition(s);document.body.removeChild(n.target.closest(\".movable_cell\"));let l=document.elementFromPoint(n.clientX,n.clientY);l=l.closest(\".cell\");let p=e.getCellPosition(l);i.get(c).canMove(p,i,o)&&(i.get(c).doMove(p,i,o),o++,e.draw(i)),this.removeEventListener(\"mouseup\",t)}))}(event,W,j,0)})}]);","extractedComments":[]}